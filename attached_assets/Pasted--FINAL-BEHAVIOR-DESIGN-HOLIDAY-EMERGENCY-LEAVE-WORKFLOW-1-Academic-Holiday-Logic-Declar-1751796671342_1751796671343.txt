ğŸ¯ FINAL BEHAVIOR DESIGN: HOLIDAY & EMERGENCY LEAVE WORKFLOW

ğŸ”¹ 1. Academic Holiday Logic
	â€¢	Declared in advance (can be one or more days ahead)
	â€¢	Once the date arrives, attendance & namaz marking will:
	â€¢	Be locked
	â€¢	Show â€œHoliday Declaredâ€
	â€¢	Display H in attendance/namaz sheets (ğŸŸ© gray background)
	â€¢	Percentage calculation will skip holidays

ğŸ”¹ 2. Emergency Leave Logic
	â€¢	Triggered unexpectedly during the day
	â€¢	Example: If today has 3 periods (PUC), and teacher completes Period 1, then triggers Emergency Leave due to exam/sudden reason â†’ Periods 2 & 3 are auto-marked as emergency leave
	â€¢	Emergency leave will:
	â€¢	Lock the remaining periods
	â€¢	Pre-fill attendance sheet as E (ğŸŸ¥ red background)
	â€¢	Show status: â€œEmergency Leave: Applied at 11:30 AMâ€
	â€¢	Attendance % calculation will skip Emergency Leave periods

ğŸ§  SCENARIO EXAMPLE

ğŸ“… Date: 2025-07-09 (Wednesday)
ğŸ§ª Class: 1st PUC Science
ğŸ• Periods: 3 total
âœ… Period 1: Attendance taken
âŒ Period 2, 3: Not yet taken
ğŸš¨ At 11:45 AM â†’ Emergency Leave declared

ğŸ¯ Result:

Period	Status
Period 1	âœ… Present/Absent
Period 2	ğŸŸ¥ Emergency Leave
Period 3	ğŸŸ¥ Emergency Leave

No one can edit Periods 2 & 3. Theyâ€™re frozen with emergency leave.

ğŸ¯ BACKEND ACTION (Prompt-style for Replit AI)

Update backend to:
	â€¢	Track leave mode
	â€¢	type: â€œacademicâ€ or â€œemergencyâ€
	â€¢	applied_at
	â€¢	applied_by
	â€¢	affected_periods: [â€œ2â€, â€œ3â€]
	â€¢	When emergency leave is triggered:
	â€¢	Check current time & class timetable
	â€¢	For all remaining periods â†’ insert leave record
	â€¢	Mark periods in attendance sheet with E (status)

ğŸ“Š FRONTEND ACTIONS
	1.	On attendance load:

	â€¢	If holiday exists â†’ disable inputs, mark H
	â€¢	If emergency leave triggered â†’ mark affected periods as E, disable inputs

	2.	Trigger Emergency Button

	â€¢	UI button â†’ â€œDeclare Emergency Leaveâ€
	â€¢	Backend checks time
	â€¢	Based on periods left, stores emergency leave periods in DB
	â€¢	Frontend syncs & shows E in red

ğŸ§¾ Export Sheet

Student Name	P1	P2	P3	%
Ahmed	P	E	E	100
Ayesha	A	E	E	0

Emergency periods donâ€™t reduce %.
